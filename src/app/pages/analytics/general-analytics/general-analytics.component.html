<div class="container" style="padding:2rem 1rem;">
	<div style="display:flex; justify-content:space-between; align-items:center; gap:1rem; margin-bottom:1.25rem;">
		<div>
			<h1 style="font-size:1.75rem; font-weight:700; margin:0;">General Analytics</h1>
			<p class="muted" style="margin:0.35rem 0 0;">Overview of your API testing activity and performance metrics</p>
		</div>
			<div>
				<select class="input" style="min-width:10rem;" [(ngModel)]="timeRange" (change)="recompute()">
					<option value="7d">Last 7 days</option>
					<option value="30d">Last 30 days</option>
					<option value="90d">Last 90 days</option>
					<option value="1y">Last year</option>
					<option value="all">All time</option>
				</select>
			</div>
	</div>

	<!-- Stats grid -->
		<div class="grid grid-4" style="gap:1rem; margin-bottom:1.25rem;">
			<div class="card card-padding" *ngFor="let s of stats">
			<div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:0.25rem;">
				<div class="muted" style="font-size:0.9rem;">{{ s.title }}</div>
			</div>
			<div style="display:flex; align-items:center; justify-content:space-between;">
				<div style="font-weight:700; font-size:1.35rem;">{{ s.value }}</div>
				<span class="badge" [class.text-method-get]="s.trend==='up'" [class.text-method-delete]="s.trend==='down'">{{ s.change }}</span>
			</div>
			<p class="muted" style="font-size:0.8rem; margin-top:0.25rem;">{{ s.description }}</p>
		</div>
	</div>

	<div class="grid grid-2" style="gap:1rem;">
		<!-- Status Distribution -->
			<div class="card">
			<div class="card-padding">
				<h3 style="font-size:1.1rem; font-weight:700; margin:0 0 0.25rem;">Status Code Distribution</h3>
				<p class="muted" style="margin:0 0 0.75rem;">Breakdown of response status codes</p>

					<div class="space-y" *ngIf="statusDistribution?.length; else noStatus">
					<div *ngFor="let item of statusDistribution" style="margin-bottom:0.75rem;">
						<div style="display:flex; align-items:center; justify-content:space-between; font-size:0.95rem;">
							<span>{{ item.status }}</span>
							<span style="font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace;">{{ item.count | number }}</span>
						</div>
						<div style="height:0.5rem; background:#e5e7eb; border-radius:999px; overflow:hidden;">
							<div [style.width.%]="item.percentage" [style.background]="statusColorVar(item.color)" style="height:100%;"></div>
						</div>
						<div class="muted" style="display:flex; justify-content:space-between; font-size:0.8rem;">
							<span>{{ item.percentage }}%</span>
						</div>
					</div>
				</div>
					<ng-template #noStatus>
						<p class="muted small">No requests in this range.</p>
					</ng-template>
			</div>
		</div>

		<!-- Top Endpoints -->
			<div class="card">
			<div class="card-padding">
				<h3 style="font-size:1.1rem; font-weight:700; margin:0 0 0.25rem;">Top Endpoints</h3>
				<p class="muted" style="margin:0 0 0.75rem;">Most frequently tested API endpoints</p>

					<div class="space-y" *ngIf="topEndpoints?.length; else noTop">
						<div *ngFor="let ep of topEndpoints; let i = index" class="row-item">
						<div class="flex-1">
							<div class="mono small-strong">{{ ep.endpoint }}</div>
							<div class="muted small">{{ ep.requests | number }} requests • {{ ep.avgTime }} avg • {{ ep.errorRate }} errors</div>
						</div>
						<span class="badge">#{{ i + 1 }}</span>
					</div>
				</div>
					<ng-template #noTop>
						<p class="muted small">No endpoints yet.</p>
					</ng-template>
			</div>
		</div>
	</div>

	<!-- Performance Trends -->
	<div class="card" style="margin-top:1.25rem;">
		<div class="card-padding">
			<h3 style="font-size:1.1rem; font-weight:700; margin:0 0 0.25rem;">Performance Trends</h3>
			<p class="muted" style="margin:0 0 0.75rem;">Request volume and response time trends over time</p>

			<div class="tabs">
				<button class="tab" [class.active]="activeTab==='requests'" (click)="setTab('requests')">Request Volume</button>
				<button class="tab" [class.active]="activeTab==='response-time'" (click)="setTab('response-time')">Response Time</button>
				<button class="tab" [class.active]="activeTab==='errors'" (click)="setTab('errors')">Error Rate</button>
			</div>

			<div class="chart-placeholder" *ngIf="activeTab==='requests'">
				<p class="muted">Request volume chart would be displayed here</p>
			</div>
			<div class="chart-placeholder" *ngIf="activeTab==='response-time'">
				<p class="muted">Response time chart would be displayed here</p>
			</div>
			<div class="chart-placeholder" *ngIf="activeTab==='errors'">
				<p class="muted">Error rate chart would be displayed here</p>
			</div>
		</div>
	</div>
</div>
