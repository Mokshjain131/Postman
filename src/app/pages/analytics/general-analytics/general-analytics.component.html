
<div class="container">
	<div class="header">
		<div>
			<h1 class="title">General Analytics</h1>
			<p class="muted subtitle">Overview of your API testing activity and performance metrics</p>
		</div>
			<div>
				<select class="input minw-10rem" [(ngModel)]="timeRange" (change)="recompute()">
					<option value="7d">Last 7 days</option>
					<option value="30d">Last 30 days</option>
					<option value="90d">Last 90 days</option>
					<option value="1y">Last year</option>
					<option value="all">All time</option>
				</select>
			</div>
	</div>

	<!-- Stats grid -->
		<div class="grid grid-4 stats">
			<div class="card card-padding" *ngFor="let s of stats">
			<div class="row">
				<div class="muted label">{{ s.title }}</div>
			</div>
			<div class="row">
				<div class="value">{{ s.value }}</div>
				<span class="badge" [class.text-method-get]="s.trend==='up'" [class.text-method-delete]="s.trend==='down'">{{ s.change }}</span>
			</div>
				<p class="muted small mt-025">{{ s.description }}</p>
		</div>
	</div>

	<div class="grid grid-2 grid-gap">
		<!-- Status Distribution -->
			<div class="card">
			<div class="card-padding">
				<h3 class="small-strong h3-compact">Status Code Distribution</h3>
				<p class="muted mb-075">Breakdown of response status codes</p>

					<div class="space-y" *ngIf="statusDistribution?.length; else noStatus">
					<div *ngFor="let item of statusDistribution" class="space-y mb-075">
						<div class="row fs-095">
							<span>{{ item.status }}</span>
							<span class="mono-count">{{ item.count | number }}</span>
						</div>
						<div class="bar">
							<div class="h-100 bar-fill" [ngClass]="item.color" [style.width.%]="item.percentage"></div>
						</div>
						<div class="muted muted-row">
							<span>{{ item.percentage }}%</span>
						</div>
					</div>
				</div>
					<ng-template #noStatus>
						<p class="muted small">No requests in this range.</p>
					</ng-template>
			</div>
		</div>

		<!-- Top Endpoints -->
			<div class="card">
			<div class="card-padding">
				<h3 class="small-strong h3-compact">Top Endpoints</h3>
				<p class="muted mb-075">Most frequently tested API endpoints</p>

					<div class="space-y" *ngIf="topEndpoints?.length; else noTop">
						<div *ngFor="let ep of topEndpoints; let i = index" class="row-item">
						<div class="flex-1">
							<div class="mono small-strong">{{ ep.endpoint }}</div>
							<div class="muted small">{{ ep.requests | number }} requests • {{ ep.avgTime }} avg • {{ ep.errorRate }} errors</div>
						</div>
						<span class="badge">#{{ i + 1 }}</span>
					</div>
				</div>
					<ng-template #noTop>
						<p class="muted small">No endpoints yet.</p>
					</ng-template>
			</div>
		</div>
	</div>

	<!-- Performance Trends -->
	<div class="card card-mt">
		<div class="card-padding">
			<h3 class="small-strong h3-compact">Performance Trends</h3>
			<p class="muted mb-075">Request volume and response time trends over time</p>

			<div class="tabs">
				<button class="tab" [class.active]="activeTab==='requests'" (click)="setTab('requests')">Request Volume</button>
				<button class="tab" [class.active]="activeTab==='response-time'" (click)="setTab('response-time')">Response Time</button>
				<button class="tab" [class.active]="activeTab==='errors'" (click)="setTab('errors')">Error Rate</button>
			</div>

			<div class="chart-placeholder" *ngIf="activeTab==='requests'">
				<p class="muted">Request volume chart would be displayed here</p>
			</div>
			<div class="chart-placeholder" *ngIf="activeTab==='response-time'">
				<p class="muted">Response time chart would be displayed here</p>
			</div>
			<div class="chart-placeholder" *ngIf="activeTab==='errors'">
				<p class="muted">Error rate chart would be displayed here</p>
			</div>
		</div>
	</div>
</div>
